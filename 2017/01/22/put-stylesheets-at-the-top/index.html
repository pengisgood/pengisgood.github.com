<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <!-- For SEO -->
  <meta name="baidu-site-verification" content="UFDznXUqi2" />
  <meta name="google-site-verification" content="6OTH-Srp0OtcTNkRErkCMoIbSMy8aoG0RiRBifvwKuU" />

  <!-- For open search -->
  <link rel="search" type="application/opensearchdescription+xml" href="http://maxpeng.vipcloud.me/opensearch.xml" title="Blog Search" />

  
  <title>前端性能调优(5) ┃ 将 Stylesheets 放在顶部 | 谋事在人，成事在天</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="原文链接：https://developer.yahoo.com/performance/rules.html#css_top

在 Yahoo！ 研究性能时，我们发现将样式表移动到文档 HEAD 使页面加载得更快。这是因为在 HEAD 中放置样式表允许页面渐进式地渲染。">
<meta property="og:type" content="article">
<meta property="og:title" content="前端性能调优(5) ┃ 将 Stylesheets 放在顶部">
<meta property="og:url" content="http://maxpeng.vipcloud.me/2017/01/22/put-stylesheets-at-the-top/index.html">
<meta property="og:site_name" content="谋事在人，成事在天">
<meta property="og:description" content="原文链接：https://developer.yahoo.com/performance/rules.html#css_top

在 Yahoo！ 研究性能时，我们发现将样式表移动到文档 HEAD 使页面加载得更快。这是因为在 HEAD 中放置样式表允许页面渐进式地渲染。">
<meta property="og:image" content="http://maxpeng.vipcloud.me/imgs/stylesheet.jpg">
<meta property="og:updated_time" content="2017-01-22T07:25:54.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="前端性能调优(5) ┃ 将 Stylesheets 放在顶部">
<meta name="twitter:description" content="原文链接：https://developer.yahoo.com/performance/rules.html#css_top

在 Yahoo！ 研究性能时，我们发现将样式表移动到文档 HEAD 使页面加载得更快。这是因为在 HEAD 中放置样式表允许页面渐进式地渲染。">
<meta name="twitter:image" content="http://maxpeng.vipcloud.me/imgs/stylesheet.jpg">
<meta name="twitter:creator" content="@pengisgood">
<link rel="publisher" href="pengisgood">
  
    <link rel="alternate" href="/atom.xml" title="谋事在人，成事在天" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">谋事在人，成事在天</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://maxpeng.vipcloud.me"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article data-post-id="ciy8c9n9a000stx1k60ccmh4s" id="post-put-stylesheets-at-the-top" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/01/22/put-stylesheets-at-the-top/" class="article-date">
  <time datetime="2017-01-22T06:44:15.000Z" itemprop="datePublished">Jan 22 2017</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Web/">Web</a>►<a class="article-category-link" href="/categories/Web/Performance/">Performance</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      前端性能调优(5) ┃ 将 Stylesheets 放在顶部
    </h1>
  

        <div class="views">0</div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/imgs/stylesheet.jpg" width="100%"></p>
<blockquote>
<p><em>原文链接：<a href="https://developer.yahoo.com/performance/rules.html#css_top" target="_blank" rel="external">https://developer.yahoo.com/performance/rules.html#css_top</a></em></p>
</blockquote>
<p>在 Yahoo！ 研究性能时，我们发现将样式表移动到文档 HEAD 使页面加载得更快。这是因为在 HEAD 中放置样式表允许页面渐进式地渲染。</p>
<a id="more"></a>
<p>关注性能的前端工程师想要页面渐进式地渲染，也就是说，我们希望浏览器尽快显示它所拥有的任何内容。这对于具有大量内容的网页和用户的网络较慢时尤其重要。给予用户视觉反馈的重要性已经被很好地研究和<a href="https://www.nngroup.com/articles/response-times-3-important-limits/" target="_blank" rel="external">记录</a>过了，例如进度指示器。在我们的例子中，HTML 页面是进度指示器！当浏览器逐渐加载页面时，页眉，导航栏，顶部的标志等都用作对等待页面的用户的视觉反馈。这提高了整体用户体验。</p>
<p>将样式表放在文档底部附近的问题是它禁止了许多浏览器（包括 Internet Explorer）中进行渐进式渲染。这些浏览器阻止渲染，以避免如果页面的样式发生变化导致的不得不重绘页面的元素。用户会被卡住，一直看着空白页。</p>
<p><a href="https://www.w3.org/TR/html4/struct/links.html#h-12.3" target="_blank" rel="external">HTML 规范</a>清楚地说明样式表将被包括在页面的 HEAD 中：“与 A 不同，[LINK] 只能出现在文档的 HEAD 部分，尽管它可能出现任意次数。无论是空白的白色屏幕还是闪现的没有样式的内容，都不是值得冒风险的替代方案。最佳解决方案是遵循 HTML 规范并在文档 HEAD 中加载样式表。</p>
<h2 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h2><blockquote>
<h3 id="Put-Stylesheets-at-the-Top"><a href="#Put-Stylesheets-at-the-Top" class="headerlink" title="Put Stylesheets at the Top"></a>Put Stylesheets at the Top</h3><p>tag: css</p>
<p>While researching performance at Yahoo!, we discovered that moving stylesheets to the document HEAD makes pages appear to be loading faster. This is because putting stylesheets in the HEAD allows the page to render progressively.</p>
<p>Front-end engineers that care about performance want a page to load progressively; that is, we want the browser to display whatever content it has as soon as possible. This is especially important for pages with a lot of content and for users on slower Internet connections. The importance of giving users visual feedback, such as progress indicators, has been well researched and <a href="https://www.nngroup.com/articles/response-times-3-important-limits/" target="_blank" rel="external">documented</a>. In our case the HTML page is the progress indicator! When the browser loads the page progressively the header, the navigation bar, the logo at the top, etc. all serve as visual feedback for the user who is waiting for the page. This improves the overall user experience.</p>
<p>The problem with putting stylesheets near the bottom of the document is that it prohibits progressive rendering in many browsers, including Internet Explorer. These browsers block rendering to avoid having to redraw elements of the page if their styles change. The user is stuck viewing a blank white page.</p>
<p>The <a href="https://www.w3.org/TR/html4/struct/links.html#h-12.3" target="_blank" rel="external">HTML specification</a> clearly states that stylesheets are to be included in the HEAD of the page: “Unlike A, [LINK] may only appear in the HEAD section of a document, although it may appear any number of times.” Neither of the alternatives, the blank white screen or flash of unstyled content, are worth the risk. The optimal solution is to follow the HTML specification and load your stylesheets in the document HEAD.</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://maxpeng.vipcloud.me/2017/01/22/put-stylesheets-at-the-top/" data-id="ciy8c9n9a000stx1k60ccmh4s" class="article-share-link">分享</a>

      
        <a class="article-tip-link">打赏</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Best-Practice/">Best Practice</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/翻译/">翻译</a></li></ul>


      <div class="tip-container">
        <div id="ciy8c9n9a000stx1k60ccmh4s" class="article-tip-box">
          <div class="payment-method">
            <label for="tip-alipay" class="article-tip-select" data-method="alipay">
              <input id="tip-alipay" name="tip" type="radio" checked/>
              支付宝
            </label>
            <label for="tip-wechat" class="article-tip-select" data-method="wechat">
              <input id="tip-wechat" name="tip" type="radio"/>
              微信
            </label>
          </div>
          <img id="alipay" src="/imgs/alipay.png">
          <img id="wechat" class="hidden" src="/imgs/wechat.png">
        </div>
      </div>
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/12/15/gzip-components/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">前端性能调优(4) ┃ Gzip 压缩</div>
    </a>
  
</nav>

  
</article>


  <ul class="ds-recent-visitors"></ul>

  
    <section id="comments">
      <div class="ds-thread" data-thread-key="post-put-stylesheets-at-the-top" data-title="前端性能调优(5) ┃ 将 Stylesheets 放在顶部" data-url="http://maxpeng.vipcloud.me/2017/01/22/put-stylesheets-at-the-top/"></div>
    </section>
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:'pengisgood'};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
       || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title">About me</h3>
  <div class="widget">
    <p><strong>彭洪伟</strong></p>
    <p><a href="mailto:pengisgood@gmail.com">PengIsGood[@]gmail.com</a></p>
    <p><a href="https://www.thoughtworks.com/" style="color: black;"><strong>Thought</strong>Works</a> 一线码农。</p>
    <p>
      Angular早期使用者，<a href="http://ngnice.com/">ngnice</a>的早期贡献者之一。除了前端技术，对Java、Scala、Ruby等也均有涉猎，并且翻译了构建工具<a href="http://www.scala-sbt.org/0.13/docs/zh-cn/index.html">SBT</a>的文档。
    </p>
    <p><a href="https://item.jd.com/11845736.html"><img src="/imgs/angular-best-practice.png" alt="" style="width:100%"/></a></p>
  </div>
</div>

  
    <div align="center">
  <a href="http://www.amazingcounters.com">
    <img border="0" src="http://cc.amazingcounters.com/counter.php?i=3199418&c=9598567" alt="AmazingCounters.com">
  </a>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/01/22/put-stylesheets-at-the-top/">前端性能调优(5) ┃ 将 Stylesheets 放在顶部</a>
          </li>
        
          <li>
            <a href="/2016/12/15/gzip-components/">前端性能调优(4) ┃ Gzip 压缩</a>
          </li>
        
          <li>
            <a href="/2016/12/13/add-an-expires-or-a-cache-control-header/">前端性能调优(3) ┃ 添加 Expires 或者 Cache-Control 头</a>
          </li>
        
          <li>
            <a href="/2016/12/02/Use-a-Content-Delivery-Network/">前端性能调优(2) ┃ 使用 CDN</a>
          </li>
        
          <li>
            <a href="/2016/12/02/Minimize-HTTP-Requests/">前端性能调优(1) ┃ 尽可能减少 HTTP 请求</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DevOps/">DevOps</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Web/Performance/">Performance</a><span class="category-list-count">5</span></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AngularJS/">AngularJS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ansible/">Ansible</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Best-Practice/">Best Practice</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6/">ES6</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SCSS/">SCSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sass/">Sass</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Skype/">Skype</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vagrant/">Vagrant</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/翻译/">翻译</a><span class="tag-list-count">7</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>


  
</aside>

        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 <a href="http://stackoverflow.com/story/maxpeng" target="_blank">彭洪伟（Max Peng）</a><br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    <script src="//code.jquery.com/jquery-2.0.3.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor:pointer;z-index:1;">
  <a title="返回顶部"><img src="/imgs/back-to-top.png" style="width:32px;height:32px;"/></a>
</div>

<script src="/js/backToTop.js"></script>

<!--Lean Cloud-->
<!-- lean cloud js -->
<!--refer to: https://leancloud.cn/docs/leanstorage_guide-js.html#更新计数器 -->
<script src="https://cdn1.lncld.net/static/js/av-min-1.2.1.js"></script>
<script>
  $(document).ready(function () {
    // 应用 ID，用来识别应用
    var APP_ID = 'P73z6DPIAfc1Jrptt0PnMore-gzGzoHsz';

    // 应用 Key，用来校验权限（Web 端可以配置安全域名来保护数据安全）
    var APP_KEY = '4n4rEhNfzn6RYUbRcpgCus7h';

    // 初始化
    AV.init({appId: APP_ID, appKey: APP_KEY});

    
    var query = new AV.Query('PageView');
    var postId = $('article').data('postId');
    var postSlug = $('article').attr('id');

    query.equalTo('postSlug', postSlug);
    query.first().then(function (pageView) {
      if (pageView) {
        increasePageView(pageView);
      } else {
        var PageView = AV.Object.extend('PageView');
        var pageView = new PageView();
        pageView.save({
          postId: postId,
          postSlug: postSlug,
          views: 0
        }).then(function (pageView) {
          increasePageView(pageView);
        })
      }
    }, function (error) {
    });

    function increasePageView(pageView) {
      pageView.increment('views', 1);
      pageView.fetchWhenSave(true);
      pageView.save().then(function (pageView) {
        updatePageView(pageView)
      });
    }
    

    function updatePageView(pageView) {
      var id = pageView.get('postSlug');
      $('#' + id + ' .views').html(pageView.get('views'));
    }
  })
</script>


  </div>
  
<!--CNZZ-->
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
  document.write(unescape("%3Cspan id='cnzz_stat_icon_1257186032'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1257186032' type='text/javascript'%3E%3C/script%3E"));</script>


</body>
</html>
