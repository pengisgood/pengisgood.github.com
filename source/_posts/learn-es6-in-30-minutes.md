---
title: ES6 30 åˆ†é’Ÿå…¥é—¨æ•™ç¨‹
date: 2016-06-21 21:29:02
tags: [ES6, JavaScript]
categories: Web å‰ç«¯
---
![](/imgs/ES6-the-bits-youll-actually-use.png)

## æœ¬æ–‡ç›®æ ‡

æœ¬æ–‡çš„ç›®æ ‡æ˜¯è®©ä½ åœ¨30åˆ†é’Ÿä¹‹å†…å¯¹ ES6 æ˜¯ä»€ä¹ˆï¼Œå¹¶ä¸”å¯¹å®ƒæœ‰ä¸€äº›åŸºæœ¬çš„äº†è§£ï¼Œå‰ææ˜¯ä½ æœ‰ä¸€å®šçš„ JavaScript åŸºç¡€ã€‚

## ECMAScript å’Œ JavaScript æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ

ES6ï¼Œè§„èŒƒä¸­ç§°ä¹‹ä¸º ECMAScript 2015ï¼ˆå› ä¸ºæ˜¯2015å¹´å‘å¸ƒçš„ï¼Œç®€ç§° ES 2015ï¼‰ï¼Œåˆå› ä¸ºæ˜¯è¯¥æ ‡å‡†çš„ç¬¬å…­ç‰ˆï¼Œæ‰€æœ‰ä¹Ÿå« ECMAScript 6ï¼Œæˆ–è€… ES 6ã€‚æœ¬æ–‡çº¯ç²¹ä¸ºäº†å°‘æ•²å‡ ä¸ªå­—ç¬¦ï¼Œç»Ÿä¸€ä½¿ç”¨ ES6ã€‚ç”¨ä¸€å¥è¯æ¦‚æ‹¬å®ƒä»¬äºŒè€…ä¹‹é—´çš„å…³ç³»ä¸ºï¼šECMAScript æ˜¯ JavaScript çš„è§„æ ¼ï¼ŒJavaScript æ˜¯ ECMAScript çš„å®ç°ã€‚æ—¢ç„¶ ECAMScript æ˜¯è§„æ ¼ï¼Œæƒ³å¿…å®ƒçš„çš„å®ç°åº”è¯¥ä¸æ­¢ä¸€ç§ï¼Œæ¯”å¦‚å¾®è½¯çš„ JScript å’Œ Macromediaï¼ˆç°å·²è¢« Adobe æ”¶è´­ï¼‰çš„ ActionScriptã€‚æ›´åŠ è¯¦ç»†çš„å†å²æ¸Šæºè¯·ç§»æ­¥ [Wikipedia](https://en.wikipedia.org/wiki/ECMAScript)ã€‚

<!--more-->

## è¯­æ³•ç‰¹æ€§

> æœ¬æ–‡ä¸­çš„å¤§éƒ¨åˆ†ä¾‹å­æ¥æºäºé˜®åšå£«çš„ä¹¦[ã€ŠECMAScript 6å…¥é—¨ã€‹](http://es6.ruanyifeng.com/)

### 1. let å’Œ const

* let

ES6 å¼•å…¥äº† `let` ç”¨ä½œå£°æ˜å˜é‡ï¼Œç”¨æ³•å’Œä¹‹å‰çš„ `var` ç±»ä¼¼ï¼Œä½†æ˜¯å£°æ˜ä¹‹åçš„æ•ˆæœå´æœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚
a) `let` å£°æ˜çš„å˜é‡ä½œç”¨åŸŸæ˜¯å—çº§çš„ï¼ˆblock scopeï¼‰ï¼Œ`var` å£°æ˜åçš„å˜é‡æ˜¯å‡½æ•°çº§çš„ï¼ˆfunction scopeï¼‰ã€‚
b) `let` å£°æ˜çš„å˜é‡ä¸å­˜åœ¨ä½œç”¨åŸŸæå‡ã€‚ä¸åƒ `var`ï¼Œå¦‚æœå…ˆä½¿ç”¨åå£°æ˜ä¼šå–å¾—å€¼ undefinedã€‚å¦‚æœå…ˆä½¿ç”¨å†ç”¨`let`å£°æ˜ï¼Œä¼šæŠ¥é”™ã€‚
c) `let` åœ¨åŒä¸€ä½œç”¨åŸŸä¸‹ï¼Œä¸å…è®¸é‡å¤å£°æ˜ï¼Œè€Œ`var` å¯ä»¥ã€‚

* const

`const` å£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ã€‚
a) `const` å£°æ˜çš„å¸¸é‡ï¼Œä¸€æ—¦å£°æ˜ï¼Œå°±å¿…é¡»ç«‹å³åˆå§‹åŒ–ï¼Œä¸èƒ½ç•™åˆ°ä»¥åèµ‹å€¼ã€‚
b) `const` å£°æ˜çš„å¸¸é‡ä½œç”¨åŸŸå’Œ `let` ç›¸åŒï¼Œä¹Ÿæ˜¯å—çº§çš„ã€‚
c) `const` å£°æ˜çš„å¸¸é‡ä¹Ÿä¸å­˜åœ¨ä½œç”¨åŸŸæå‡ã€‚
d) åœ¨åŒä¸€ä½œç”¨åŸŸä¸‹ï¼Œå’Œ `let` ä¸€æ ·ï¼Œä¸èƒ½é‡å¤å£°æ˜ `const` å¸¸é‡ã€‚
e) å¯¹äºå¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œ`const` å£°æ˜åªæ˜¯ä¿è¯å˜é‡åæ‰€æŒ‡å‘çš„åœ°å€ä¸å˜ï¼Œå¹¶ä¸ä¿è¯æ”¹åœ°å€ä¿å­˜çš„æ•°æ®ä¸å˜ã€‚

### 2. Destructuring

ES6å…è®¸æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°ç»„æˆ–å¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¢«ç§°ä¸ºè§£æ„ï¼ˆDestructuringï¼‰ã€‚å…¶ç”¨æ³•å’Œ Rubyã€Scala ç­‰çš„æ¨¡å¼åŒ¹é…ï¼ˆPattern Matchï¼‰æ¯”è¾ƒç±»ä¼¼ã€‚

* æ•°ç»„

åªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œç­‰å·å·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆç›¸åº”çš„å€¼ã€‚æœ‰ä¸¤ç§ç‰¹æ®Šæƒ…å†µï¼Œä¸€ç§æ˜¯ç­‰å·å³è¾¹çš„å€¼ä¸èƒ½è¢«è§£æ„ï¼Œè¿™æ—¶å·¦è¾¹çš„å˜é‡å€¼ä¸º `undefined`ï¼›å¦ä¸€ç§æ˜¯ä¸å®Œå…¨è§£æ„ï¼Œå³ç­‰å·å·¦è¾¹çš„æ¨¡å¼åªåŒ¹é…å³è¾¹éƒ¨åˆ†å€¼ã€‚

```javascript
var [a, b, c] = [1, 2, 3];
//a = 1, b = 2, c = 3

let [e, f] = [4, 5];
//e = 4, f = 5

const [x, , y] = [1, 2, 3];
//x = 1, y = 3

let [head, ...tail] = [1, 2, 3, 4];
//head = 1, tail = [2, 3, 4]

let [x, y, ...z] = ['a'];
//x = 'a', y = undefined, z = []
```

* å¯¹è±¡

å¯¹è±¡çš„è§£æ„å’Œæ•°ç»„ä¸åŒã€‚æ•°ç»„çš„å…ƒç´ æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ï¼Œå˜é‡çš„å–å€¼ç”±å®ƒçš„ä½ç½®å†³å®šï¼›è€Œå¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡çš„å–å€¼æ¥è‡ªäºå’Œå®ƒåŒåçš„å±æ€§ï¼Œå¦‚æœæ²¡æœ‰åŒåçš„å±æ€§åˆ™å€¼ä¸º `undefined`ã€‚

```javascript
var { bar, foo } = { foo: "aaa", bar: "bbb" };
//foo = "aaa", bar = "bbb"

var { baz } = { foo: "aaa", bar: "bbb" };
//baz = undefined
```

ä¸Šé¢è¿™ç§è§£æ„èµ‹å€¼å®é™…ä¸Šæ˜¯ä¸€ç§ç®€å†™ï¼Œå®Œæ•´çš„å†™æ³•å¦‚ä¸‹ï¼š

```javascript
var { bar: bar, foo: foo } = { foo: "aaa", bar: "bbb" };
//foo = "aaa", bar = "bbb"

var { baz: baz } = { foo: "aaa", bar: "bbb" };
//baz = undefined
```

å¯¹è±¡çš„è§£æ„æœºåˆ¶ï¼Œæ˜¯å…ˆæ ¹æ®å†’å·å‰é¢çš„æ¨¡å¼ä»ç­‰å·å³è¾¹å¯¹è±¡ä¸­æ‰¾åˆ°åŒåå±æ€§ï¼Œç„¶åå°†å…¶å€¼èµ‹ç»™å†’å·å³è¾¹çš„å˜é‡ã€‚å¦‚æœæ¨¡å¼å’Œå˜é‡åç›¸åŒï¼Œåˆ™å¯ä»¥é‡‡ç”¨ç®€å†™å½¢å¼ï¼Œå¦åˆ™å¿…é¡»é‡‡ç”¨å®Œæ•´å†™æ³•ã€‚è¿™ç§æœºåˆ¶ä¸ä»…é€‚ç”¨äºç®€å•çš„å¯¹è±¡ï¼ŒåŒæ ·ä¹Ÿé€‚ç”¨äºå¤æ‚çš„å¯¹è±¡ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªå¤æ‚çš„ä¾‹å­ï¼š

```javascript
var node = {
  location: {
    start: {
      row: 1,
      column: 5
    }
  }
};

var { location: { start: { row }} } = node;
//line = 1
//location -> error: location is undefined å› ä¸º location æ˜¯æ¨¡å¼ï¼Œè€Œéå˜é‡
//start -> error: start is undefined åŒä¸Š
```

* å­—ç¬¦ä¸²

å­—ç¬¦ä¸²å¯ä»¥è¢«è½¬æ¢æˆç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œå› æ­¤ä¹Ÿå¯ä»¥è§£æ„èµ‹å€¼ã€‚

```javascript
let [a, b, c, d] = 'peng';
//a = 'p', b = 'e', c = 'n', d = 'g'
```

* æ•°å€¼ & å¸ƒå°”å€¼

ç»“æ„çš„å¦ä¸€æ¡è§„åˆ™æ˜¯å¦‚æœç­‰å·å³è¾¹çš„å€¼ä¸æ˜¯å¯¹è±¡ï¼Œå°±ä¼šå…ˆå°è¯•å°†å…¶è½¬ä¸ºå¯¹è±¡ï¼Œç„¶åé‡‡ç”¨å¯¹è±¡çš„ç»“æ„è§„åˆ™ã€‚è¿™é‡Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå› ä¸º `undefined` å’Œ `null` æ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹å®ƒä»¬è§£æ„èµ‹å€¼ä¼šæŠ¥é”™ã€‚

```javascript
let {toString: n} = 123;
n === Number.prototype.toString // true

let {toString: s} = true;
s === Boolean.prototype.toString // true

let { prop: x } = undefined; // TypeError
let { prop: y } = null; // TypeError
```

* å‡½æ•°å‚æ•°

å‡½æ•°çš„å‚æ•°æ”¯æŒç»“æ„èµ‹å€¼ï¼Œå…¶è§„åˆ™å’Œæ•°ç»„ã€å¯¹è±¡çš„è§£æ„è§„åˆ™ä¸€è‡´ã€‚

```javascript
function add([x, y]){
  return x + y;
}

add([1, 2]); // 3

function move({x, y}) {
  return [x, y];
}

move({x: 3, y: 8}); // [3, 8]
```

### 3. Template String

åœ¨ä»¥å‰çš„ JavaScript ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œæ‹¼æ¥å­—ç¬¦ä¸²çš„åœºæ™¯åœ¨æ‰€éš¾å…ã€‚æˆ‘ä»¬å¾€å¾€ä¼šå†™å‡ºå¦‚ä¸‹ä»£ç ï¼š

```javascript
function description(tasks){
  return 'There are <b>' + tasks.count + '</b> in total, and <b>' + tasks.done + '</b> are done.';
}
```

è¿™ç§å†™æ³•éå¸¸åŸå§‹å’Œç¹çï¼Œåœ¨ ES6 é‡Œé¢å¼•å…¥äº†æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œç”¨åå¼•å·ï¼ˆ ` ` ` ï¼‰æ ‡è¯†ã€‚å®ƒå¯ä»¥å½“ä½œæ™®é€šå•è¡Œå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå¤šè¡Œå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œå¯ä»¥åµŒå…¥å˜é‡ï¼Œå‡½æ•°è°ƒç”¨ã€‚æ¨¡æ¿å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ï¼Œéœ€è¦å°†å˜é‡åæˆ–å‡½æ•°è°ƒç”¨å†™åœ¨`${ }`ä¹‹ä¸­ã€‚

```javascript
var [x, y] = [1, 2];

`${x} + ${y * 2} = ${x + y * 2}`
// "1 + 4 = 5"

function fn() {
  return "Hello World";
}

`foo ${fn()} bar`
//foo Hello World bar
```

### 4. Class

JavaScript åœ¨ ES6 ä¹‹å‰ï¼Œå®šä¹‰å¯¹è±¡éƒ½æ˜¯é€šè¿‡æ„é€ å‡½æ•°çš„æ–¹å¼è¿›è¡Œçš„ã€‚å¦‚ä¸‹

* åŸºæœ¬ç”¨æ³•

```javascript
function Point(x,y){
  this.x = x;
  this.y = y;
}

Point.prototype.toString = function () {
  return '(' + this.x + ', ' + this.y + ')';
};
```

è¿™ç§å†™æ³•ä¸å…¶ä»–çš„é¢å‘å¯¹è±¡çš„è¯­è¨€è¡¨ç¤ºæ–¹æ³•åŒºåˆ«æ¯”è¾ƒå¤§ï¼Œæ¯”å¦‚ Javaã€‚ä¸€å¼€å§‹è®©åˆšæ¥è§¦è¿™é—¨è¯­è¨€çš„äººå¾ˆä¸èƒ½ç†è§£ã€‚è€Œ ES6 å¼•å…¥äº† `class` å…³é”®å­—ï¼Œæä¾›äº†ä¸€ä¸ªè¯­æ³•ç³–ï¼ˆsyntax sugarï¼‰ã€‚è®© JavaScript çš„é¢å‘å¯¹è±¡çš„å†™æ³•æ›´åŠ ç›´è§‚ï¼Œå’Œå…¶ä»–è¯­è¨€çš„é¢å‘å¯¹è±¡çš„å†™æ³•æ›´åŠ ç›¸ä¼¼ã€‚

```javascript
class Point {
  constructor(x, y) {
    this.x = x;
    this.y = y;
  }

  toString() {
    return '(' + this.x + ', ' + this.y + ')';
  }
}

let p = new Point(1, 2);
```

ä¸Šé¢çš„å†™æ³•çœ‹ç€æ˜¯å¦æ›´åŠ äº²åˆ‡ï¼Ÿæœ‰æ„é€ å‡½æ•°ï¼Œæœ‰å®ä¾‹æ–¹æ³•ã€‚

å¯¹äº `constructor` æ–¹æ³•ï¼Œæœ‰äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ `constructor` æ–¹æ³•æ˜¯ç±»çš„é»˜è®¤æ–¹æ³•ï¼Œé€šè¿‡ `new` å‘½ä»¤ç”Ÿæˆå¯¹è±¡å®ä¾‹æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•ã€‚ä¸€ä¸ªç±»å¿…é¡»æœ‰ `constructor` æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œä¸€ä¸ªç©ºçš„ `constructor` æ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ ã€‚ `constructor` æ–¹æ³•é»˜è®¤è¿”å›å®ä¾‹å¯¹è±¡ï¼ˆå³ `this` ï¼‰ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è¿”å›å¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œé€šå¸¸ä¸å»ºè®®ä½ è¿™ä¹ˆå¹²ï¼Œé™¤éæ˜¯ä½ çŒ´å­ğŸµæ´¾æ¥çš„é€—é€¼ã€‚

å¦å¤–ï¼Œç±»çš„å®šä¹‰ä¸å­˜åœ¨ä½œç”¨åŸŸæå‡ã€‚å¦‚æœå…ˆä½¿ç”¨åå®šä¹‰ä¼šæŠ¥é”™ã€‚

* ç»§æ‰¿

ES6 å¼•å…¥äº† `extends` å…³é”®å­—ï¼Œ `class` ä¹‹é—´å¯ä»¥é€šè¿‡ `extends` å¾ˆæ–¹ä¾¿çš„å®ç°ç»§æ‰¿ã€‚

```javascript
class ColorPoint extends Point {
  constructor(x, y, color) {
    super(x, y); // è°ƒç”¨çˆ¶ç±»çš„constructor(x, y)
    this.color = color;
  }

  toString() {
    return this.color + ' ' + super.toString(); // è°ƒç”¨çˆ¶ç±»çš„toString()
  }
}
```

è¿™é‡Œåœ¨ `constructor` å’Œ `toString` æ–¹æ³•ä¸­éƒ½å‡ºç°äº† `super` å…³é”®å­—ã€‚è¿™ä¸ªå…³é”®å­—æœ‰ä¸¤ç§ç”¨æ³•ï¼Œä¸€ç§æ˜¯ä½œä¸ºå‡½æ•°è°ƒç”¨ï¼Œæ­¤æ—¶ `super` ä»£è¡¨çˆ¶ç±»çš„ `constructor` æ–¹æ³•ï¼›å¦ä¸€ç§æ˜¯ä½œä¸ºå¯¹è±¡è°ƒç”¨ï¼Œæ­¤æ—¶ `super` ä»£è¡¨çš„æ˜¯çˆ¶ç±»ï¼Œæ—¢å¯ä»¥åº”ç”¨çˆ¶ç±»å®ä¾‹çš„æ–¹æ³•å’Œå±æ€§ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨çˆ¶ç±»çš„é™æ€æ–¹æ³•ã€‚

å¦‚æœå­ç±»å®šä¹‰äº† `constructor` æ–¹æ³•ï¼Œå­ç±»å¿…é¡»åœ¨ `constructor` æ–¹æ³•ä¸­è°ƒç”¨ `super` æ–¹æ³•ï¼Œå¦åˆ™æ–°å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»æ²¡æœ‰è‡ªå·±çš„ `this` å¯¹è±¡ï¼Œè€Œæ˜¯ç»§æ‰¿çˆ¶ç±»çš„ `this` å¯¹è±¡ï¼Œç„¶åå¯¹å…¶è¿›è¡ŒåŠ å·¥ã€‚å¦‚æœä¸è°ƒç”¨ `super` æ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ° `this` å¯¹è±¡ã€‚è¿™ä¸ ES5 çš„ç»§æ‰¿æœ‰å¾ˆå¤§åŒºåˆ«ã€‚

å¦‚æœå­ç±»æ²¡æœ‰æ˜¾ç¤ºå®šä¹‰ `constructor` æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ ï¼Œä»£ç å¦‚ä¸‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡æœ‰æ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œä»»ä½•ä¸€ä¸ªå­ç±»éƒ½æœ‰ `constructor` æ–¹æ³•ã€‚

```javascript
constructor(...args) {
  super(...args);
}
```

* é™æ€æ–¹æ³•

ç±»ç›¸å½“äºå®ä¾‹çš„åŸå‹ï¼Œæ‰€æœ‰åœ¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½ä¼šè¢«å®ä¾‹ç»§æ‰¿ã€‚å¦‚æœåœ¨ä¸€ä¸ªæ–¹æ³•å‰åŠ ä¸Š `static` å…³é”®å­—ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•ä¸ä¼šè¢«å®ä¾‹ç»§æ‰¿ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ç±»æ¥è°ƒç”¨ï¼Œè¿™ç§ç”¨æ³•å’Œå…¶ä»–çš„é¢å‘å¯¹è±¡è¯­è¨€ä¸­çš„é™æ€æ–¹æ³•å¾ˆç±»ä¼¼ã€‚è€Œä¸”çˆ¶ç±»çš„é™æ€æ–¹æ³•å¯ä»¥è¢«å­ç±»ç»§æ‰¿ï¼Œåœ¨å­ç±»çš„å®šä¹‰ä¸­ï¼Œå¯ä»¥é€šè¿‡ `super` æ¥è°ƒç”¨ï¼›ä¹Ÿå¯ä»¥é€šè¿‡å­ç±»ç›´æ¥è°ƒç”¨è¯¥é™æ€æ–¹æ³•ã€‚

```javascript
class Foo {
  static f() {
    return 'hello';
  }
}

class Bar extends Foo {
  static b() {
    return super.f() + ', too';
  }
}

Foo.f(); //hello
Bar.f(); //hello
Bar.b(); //hello, too
```

### 6. Iterator

éå†å™¨ï¼ˆIteratorï¼‰ä½œä¸ºä¸€ç§æœºåˆ¶ï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦æ”¯æŒIteratorï¼Œå°±å¯ä»¥å®Œæˆéå†æ“ä½œã€‚æ¦‚å†µåœ°è®²ï¼ŒIterator æœ‰ä¸‰ä¸ªä½œç”¨ï¼šä¸€æ˜¯ä¸ºå„ç§æ•°æ®ç»“æ„ï¼Œæä¾›ä¸€ä¸ªç»Ÿä¸€çš„ã€ç®€ä¾¿çš„è®¿é—®æ¥å£ï¼›äºŒæ˜¯ä½¿å¾—æ•°æ®ç»“æ„çš„æˆå‘˜èƒ½å¤ŸæŒ‰æŸç§æ¬¡åºæ’åˆ—ï¼›ä¸‰æ˜¯ES6åˆ›é€ äº†ä¸€ç§æ–°çš„éå†å‘½ä»¤ `for...of` å¾ªç¯ï¼ŒIteratoræ¥å£ä¸»è¦ä¾› `for...of` æ¶ˆè´¹ã€‚

Iteratorçš„éå†è¿‡ç¨‹æ˜¯è¿™æ ·çš„:
ï¼ˆ1ï¼‰åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œéå†å™¨å¯¹è±¡æœ¬è´¨ä¸Šï¼Œå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚
ï¼ˆ2ï¼‰ç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„ `next` æ–¹æ³•ï¼Œå¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ã€‚
ï¼ˆ3ï¼‰ç¬¬äºŒæ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„ `next` æ–¹æ³•ï¼ŒæŒ‡é’ˆå°±æŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬äºŒä¸ªæˆå‘˜ã€‚
ï¼ˆ4ï¼‰ä¸æ–­è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„ `next` æ–¹æ³•ï¼Œç›´åˆ°å®ƒæŒ‡å‘æ•°æ®ç»“æ„çš„ç»“æŸä½ç½®ã€‚


### 7. Module

ES6 æå‡ºçš„ `class` è¯­æ³•ç³–ï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ–¹ä¾¿äº†é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è§£å†³æ¨¡å—åŒ–çš„é—®é¢˜ã€‚è¿½æº¯ JavaScript çš„å†å²ï¼Œä¸€ç›´æ²¡æœ‰æ·»åŠ å¯¹æ¨¡å—åŒ–çš„æ”¯æŒï¼Œå¯¼è‡´åœ¨æ„å»ºå¤§å‹çš„å¤æ‚çš„ç³»ç»Ÿæ—¶ï¼Œæ‹†åˆ†ä¾èµ–ï¼ŒæŒ‰éœ€åŠ è½½éƒ½ä¸æ˜¯å¾ˆå®¹æ˜“çš„äº‹æƒ…ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå„å¤§å…¬å¸ã€ç¤¾åŒºäº‰ç›¸æ”¾å‡ºå„ç§è§„èŒƒçš„åŸå› ï¼Œæ¯”å¦‚ AMDã€CMDã€‚

ES6æ¨¡å—çš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯å°½é‡çš„é™æ€åŒ–ï¼Œä½¿å¾—åœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡ã€‚è€ŒCommonJSå’ŒAMDæ¨¡å—ï¼Œéƒ½åªèƒ½åœ¨è¿è¡Œæ—¶ç¡®å®šè¿™äº›ä¸œè¥¿ï¼Œæ‰€ä»¥ä¸èƒ½å¾ˆå¥½çš„å®ç°æŒ‰éœ€åŠ è½½ã€‚ES6çš„æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡ `export` è¯­å¥æ˜¾å¼æŒ‡å®šè¾“å‡ºçš„ä»£ç ï¼Œè¾“å…¥æ—¶ä¹Ÿé‡‡ç”¨é™æ€å‘½ä»¤çš„å½¢å¼ã€‚

```javascript
// ES6æ¨¡å—
import {sin, cos} from 'Math';
```

* export

æ¨¡å—åŠŸèƒ½ä¸»è¦ç”±ä¸¤ä¸ªè¯­å¥æ„æˆï¼š `export` å’Œ `import` ã€‚ `export` è¯­å¥ç”¨äºè§„å®šæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œ `import` è¯­å¥ç”¨äºè¾“å…¥å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½ã€‚

ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶å†…éƒ¨çš„æ‰€æœ‰å˜é‡ï¼Œå¤–éƒ¨æ— æ³•è·å–ã€‚å¦‚æœä½ å¸Œæœ›å¤–éƒ¨èƒ½å¤Ÿè¯»å–æ¨¡å—å†…éƒ¨çš„æŸä¸ªå˜é‡ï¼Œå°±å¿…é¡»ä½¿ç”¨ `export` è¯­å¥è¾“å‡ºè¯¥å˜é‡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªJSæ–‡ä»¶ï¼Œé‡Œé¢ä½¿ç”¨ `export` è¯­å¥è¾“å‡ºå˜é‡ã€‚

```javascript
//profile.js
export var firstName = 'Michael';
export var lastName = 'Jackson';
export var year = 1958;
```

ä¹Ÿå¯å†™æˆï¼š

```javascript
var firstName = 'Michael';
var lastName = 'Jackson';
var year = 1958;

export {firstName, lastName, year};
```

å¯¹äº `function` å’Œ `class` å†™æ³•éƒ½ç±»ä¼¼ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œ `export` è¾“å‡ºçš„å˜é‡å°±æ˜¯æœ¬æ¥çš„åå­—ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ `as` å…³é”®å­—é‡å‘½åã€‚

```javascript
function v1() { ... }
function v2() { ... }

export {
  v1 as streamV1,
  v2 as streamV2,
  v2 as streamLatestVersion //è¿™é‡ŒV2å¯ä»¥ç”¨ä¸åŒçš„åå­—è¾“å‡ºã€‚
};
```

* import

ä½¿ç”¨ `export` è¯­å¥å®šä¹‰äº†æ¨¡å—çš„å¯¹å¤–æ¥å£ä»¥åï¼Œå…¶ä»–JSæ–‡ä»¶å°±å¯ä»¥é€šè¿‡ `import` è¯­å¥åŠ è½½è¿™ä¸ªæ¨¡å—ï¼ˆæ–‡ä»¶ï¼‰ã€‚

```javascript
// main.js
import {firstName, lastName, year} from './profile';

function setName(element) {
  element.textContent = firstName + ' ' + lastName;
}
```

å¼•å…¥å˜é‡çš„æ—¶å€™ä¹Ÿå¯ä»¥è¿›è¡Œé‡å‘½åï¼Œæ¯”å¦‚ï¼š

```javascript
import { lastName as surname } from './profile';
```

* æ¨¡å—çš„æ•´ä½“åŠ è½½

é™¤äº†åƒå‰é¢çš„ä¾‹å­æŒ‡å®šåŠ è½½æŸä¸ªè¾“å‡ºå€¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ•´ä½“åŠ è½½ï¼Œå³ç”¨æ˜Ÿå·ï¼ˆ `*` ï¼‰æŒ‡å®šä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰è¾“å‡ºå€¼éƒ½åŠ è½½åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šé¢ã€‚

```javascript
// circle.js
export function area(radius) {
  return Math.PI * radius * radius;
}

export function circumference(radius) {
  return 2 * Math.PI * radius;
}

//æˆ–è€…å†™æˆ
function area(radius) {
  return Math.PI * radius * radius;
}

function circumference(radius) {
  return 2 * Math.PI * radius;
}

export {area, circumference};
```

ç°åœ¨æˆ‘ä»¬éœ€è¦åŠ è½½ circle.js é‡Œé¢æ‰€æœ‰çš„å‡½æ•°ã€‚ä¸€ç§æ˜¯åœ¨ `import` çš„æ—¶å€™åˆ—å‡ºæ‰€æœ‰çš„å‡½æ•°ï¼›å¦ä¸€ç§æ˜¯ä½¿ç”¨æ˜Ÿå·ä»£æ›¿æ‰€æœ‰ã€‚

```javascript
// main.js
//æ–¹æ³•ä¸€
import { area, circumference } from './circle';

console.log('åœ†é¢ç§¯ï¼š' + area(4));
console.log('åœ†å‘¨é•¿ï¼š' + circumference(14));

//æ–¹æ³•äºŒ
import * as circle from './circle';

console.log('åœ†é¢ç§¯ï¼š' + circle.area(4));
console.log('åœ†å‘¨é•¿ï¼š' + circle.circumference(14));
```

* export default

ä»å‰é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæƒ³è¦ `import` éƒ¨åˆ†å‡½æ•°çš„æ—¶å€™ï¼Œç±»åº“çš„ä½¿ç”¨è€…å¿…é¡»è¦çŸ¥é“å…¶ä¸­åˆ°åº•åŒ…å«äº†å“ªäº›å‡½æ•°ã€‚è¿™ä¸ªæ—¶å€™ä¸ºäº†ç»™ä½¿ç”¨è€…æä¾›æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `export default`æ¥ä¸ºæ¨¡å—æŒ‡å®šé»˜è®¤è¾“å‡ºå‚æ•°ã€‚

```javascript
// export-default.js
export default function () {
  console.log('foo');
}

// import-default.js
import customName from './export-default';
customName(); // 'foo'
```

ä¸Šé¢çš„ `export` ä¸­å£°æ˜äº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œç„¶åè¾“å‡ºä¸ºé»˜è®¤å€¼ã€‚æ‰€ä»¥åœ¨ `import` çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥æŒ‡å®šä»»æ„åå­—ï¼Œå› æ­¤è¿™æ—¶ `import` è¯­å¥åé¢ï¼Œä¸ä½¿ç”¨å¤§æ‹¬å·ã€‚å½“ç„¶ `export default` ä¹Ÿé€‚ç”¨äºéåŒ¿åå‡½æ•°ã€‚

```javascript
// export-default.js
export default function foo() {
  console.log('foo');
}

// æˆ–è€…å†™æˆ
function foo() {
  console.log('foo');
}
export default foo;
```

ä¸Šé¢ä¾‹å­ä¸­ï¼Œå‡½æ•°å `foo` åªåœ¨æ¨¡å—å†…éƒ¨æœ‰æ•ˆã€‚åŠ è½½çš„æ—¶å€™ä¹Ÿä¼šè¢«è§†åŒä¸ºåŒ¿åå‡½æ•°ã€‚å…¶å®æœ¬è´¨ä¸Šï¼Œ`export default`å°±æ˜¯è¾“å‡ºä¸€ä¸ªå«åš`default`çš„å˜é‡æˆ–å‡½æ•°ï¼Œç„¶åç³»ç»Ÿå…è®¸ä½ ä¸ºå®ƒå–ä»»æ„åå­—ã€‚

### 8. å…¶ä»–

é’ˆå¯¹ ES6ä¸­çš„å…¶ä»–è¯­æ³•ç‰¹æ€§æˆ‘å°±ä¸åœ¨è¿™é‡Œä¸€ä¸€å±•å¼€äº†ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªè¡Œäº†è§£ï¼š`Generator`ã€`Regular Expression`ã€`Symbol`ã€`Promise`ã€`Set`ã€`Map`ã€`Binary Array`ã€`Proxy`ã€`Reflect`ç­‰ã€‚

## ES6 çš„å…¼å®¹æ€§
éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå„å¤§å‚å•†å¯¹ ES6 çš„æ”¯æŒè¶Šæ¥è¶Šå®Œå–„ï¼ŒES6 çš„å¤§éƒ¨åˆ†ç‰¹æ€§éƒ½å·²å¾—åˆ°å®ç°ã€‚æ›´è¯¦ç»†çš„å…¼å®¹æ€§åˆ—è¡¨è¯·ç§»æ­¥ [http://kangax.github.io/compat-table/es6/](http://kangax.github.io/compat-table/es6/)ã€‚

> ä»¥ä¸‹æ•°æ®é‡‡é›†ï¼š2016å¹´06æœˆ21æ—¥22:21:51

Compilers | Desktop browsers | Servers/runtimes | Mobile
:---:|:---:|:---:|:---:
Traceur 58% | Edge 14 90% | Node 6 93% | iOS 9 53%
Babel 74% | Firefox 49 93% ||
| Chrome 51/Opera 38 98% ||

## å‚è€ƒèµ„æ–™
> é˜®åšå£«çš„ä¹¦[ã€ŠECMAScript 6å…¥é—¨ã€‹](http://es6.ruanyifeng.com/)
> [Babeljs.io](http://babeljs.io/docs/learn-es2015/)
> [ECMAScript Support in Mozilla](https://developer.mozilla.org/en-US/docs/Web/JavaScript/New_in_JavaScript/ECMAScript_6_support_in_Mozilla)
> [http://kangax.github.io/compat-table/es6/](http://kangax.github.io/compat-table/es6/)
